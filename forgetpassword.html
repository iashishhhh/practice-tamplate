<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password</title>
</head>

<body>
    <!-- Forgot Password Form -->
    <form id="forgotPasswordForm">
        <label for="email">Enter your email:</label>
        <input type="email" id="email"><br><br>

        <button type="submit">Send Password Reset Link</button>
    </form>

    <div id="emailError" class="error"></div>

    <script>
        // Capture form submit event
        document.getElementById('forgotPasswordForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent form from refreshing the page

            // Clear previous errors
            clearErrors();

            // Collect email value
            const email = document.getElementById('email').value.trim();

            let isValid = true;

            // Custom validation for email
            if (email === '') {
                showError('emailError', 'Email is required!');
                isValid = false;
            } else if (!validateEmail(email)) {
                showError('emailError', 'Please enter a valid email address.');
                isValid = false;
            }

            if (isValid) {
                // Retrieve user data from localStorage
                const storedUserData = JSON.parse(localStorage.getItem('userData'));

                // Check if the email matches any stored user data
                if (storedUserData && storedUserData.email === email) {
                    // Simulate sending the password reset link (in a real-world app, you would send an email)
                    alert('Password reset link has been sent to your email address!');
                    console.log(`Password reset link sent to: ${email}`);
                    // Redirect to the password reset page (e.g., resetPassword.html)
                    window.location.href = 'resetPassword.html'; // Change this URL to where you want to redirect
                } else {
                    showError('emailError', 'Email not found in our records!');
                }
            }
        });

        // Helper function to validate email
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Helper function to show errors
        function showError(elementId, message) {
            document.getElementById(elementId).innerText = message;
        }

        // Helper function to clear errors
        function clearErrors() {
            const errorElements = document.querySelectorAll('.error');
            errorElements.forEach(element => {
                element.innerText = '';
            });
        }

    </script>
</body>

</html>